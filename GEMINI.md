# GEMINI.md

Этот файл содержит всесторонний обзор проекта клона "Flappy Bird" и предназначен для использования в качестве контекста для будущей разработки с помощью ИИ.

## Обзор проекта

Этот проект представляет собой клон популярной игры "Flappy Bird", созданный с использованием игрового движка [Bevy](https://bevyengine.org/) на Rust. В игре представлена птица, которой игрок управляет, заставляя ее "прыгать", чтобы перемещаться по ряду труб.

## Сборка и запуск

Для сборки и запуска проекта используйте следующие команды `cargo`:

```bash
# Собрать проект
cargo build

# Запустить проект
cargo run
```

## Структура проекта

Проект организован в несколько модулей, каждый из которых имеет определенную ответственность:

-   `src/main.rs`: Основная точка входа в приложение. Он инициализирует приложение Bevy, настраивает игровое окно и добавляет основной `GamePlugin`.
-   `src/states`: Определяет различные состояния игры, которые контролируют ход игры (`Menu`, `Playing`, `Paused`, `GameOver`).
-   `src/core`: Основной модуль игры. Он содержит `GamePlugin`, который объединяет все остальные плагины и системы. Он также определяет основные ресурсы и системы, используемые на протяжении всей игры:
    -   `components.rs`: Определяет основные компоненты для сущностей игры, включая коллайдеры и компоненты кнопок меню (`MenuButton`, `StartButton`, `ExitButton`).
    -   `systems.rs`: Содержит основные игровые системы, включая управление состояниями игры, обработку кликов по кнопкам меню и визуальные эффекты.
    -   `resources.rs`: Определяет игровые ресурсы, такие как игровые ассеты и счет очков.
-   `src/plugins`: Этот модуль содержит основную игровую логику, разделенную на плагины для различных аспектов игры:
    -   `asset_loader.rs`: Отвечает за загрузку игровых ресурсов, таких как изображения и шрифты.
    -   `bird.rs`: Управляет движением птицы, прыжками и появлением/исчезновением.
    -   `pipes.rs`: Управляет бесконечным появлением, движением и обнаружением столкновений труб, а также системой подсчета очков. Включает ресурс `PipeSpawner` для контроля времени спавна и систему очистки труб за экраном.
-   `assets`: Этот каталог содержит все игровые ресурсы, такие как изображения и шрифты.

## Принципы разработки

Проект соответствует стандартным соглашениям приложения Bevy, основанного на архитектуре сущность-компонент-система (ECS). Игровая логика организована в плагины, системы и состояния, что обеспечивает модульную и масштабируемую кодовую базу.

-   **Плагины:** Игра разделена на несколько плагинов, каждый из которых отвечает за определенную функцию (например, `BirdPlugin`, `PipesPlugin`).
-   **Системы:** Системы — это функции, которые работают с сущностями с определенными компонентами. Они содержат игровую логику (например, `bird_movement`, `check_collisions`).
-   **Состояния:** Поток игры управляется конечным автоматом, который переключается между различными `GameStates` (например, из `Menu` в `Playing`). Текущие состояния включают `MainMenu`, `PreGame`, `Playing`, `Paused`, `GameOver`.

## Интерфейс пользователя

### Главное меню
Главное меню реализовано с интерактивными кнопками:
- **Кнопка "Начать"**: Переводит игру из состояния `MainMenu` в `PreGame`
- **Кнопка "Выход"**: Завершает приложение
- **Hover-эффекты**: Кнопки меняют цвет при наведении мыши для визуальной обратной связи

### Управление
- **Мышь**: Клик по кнопкам в главном меню и экране Game Over
- **Клавиатура**:
  - `Пробел`: Перезапуск игры из состояния Game Over
  - `Esc`: Пауза во время игры, выход из игры в главном меню

## Архитектурные особенности

### Компонентный подход для UI
Меню реализовано с использованием ECS архитектуры Bevy:
- `MenuButton`: Базовый компонент для всех кнопок меню
- `StartButton`, `ExitButton`: Специализированные компоненты для конкретных кнопок
- Системы обработки взаимодействия обеспечивают реакцию на клики и hover-состояния

### Обработка пользовательского ввода
Система обработки событий разделена на:
- Клавиатурный ввод для управления игрой
- Мышинный ввод для взаимодействия с элементами интерфейса
- Визуальная обратная связь для улучшения пользовательского опыта
