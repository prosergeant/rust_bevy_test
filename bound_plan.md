# План реализации проверки границ экрана для Flappy Bird

## Проблема
Игра переходит в состояние `GameOver` только при столкновении с трубами, но не проверяет выход птицы за границы экрана.

## Задачи

1. **Добавить проверку выхода птицы за границы экрана** в `plugins/bird.rs`
2. **Обновить границы экрана** чтобы определить когда птица выходит за пределы
3. **Интегрировать проверку границ в систему BirdPlugin**
4. **Переходить в состояние GameOver при пересечении границ**

## Конкретные изменения

### В файле `plugins/bird.rs`:

1. Добавить систему `check_bird_bounds` которая:
   - Получает размеры окна через `Query<&Window>`
   - Проверяет позицию птицы относительно границ экрана
   - Переходит в `GameState::GameOver` при выходе за границы
   - Работает только в состоянии `GameState::Playing`

2. Добавить систему в BirdPlugin:
   ```rust
   .add_systems(
       Update,
       check_bird_bounds.run_if(in_state(GameState::Playing))
   )
   ```

3. Определить границы экрана:
   - Верхняя граница = window.height() / 2
   - Нижняя граница = -window.height() / 2

### Алгоритм проверки:
```rust
if bird_y > window_height/2 || bird_y < -window_height/2 {
    next_state.set(GameState::GameOver);
}
```

### Структура новой функции:
```rust
fn check_bird_bounds(
    query: Query<&Transform, With<Bird>>,
    windows: Query<&Window>,
    mut next_state: ResMut<NextState<GameState>>,
)
```

## Технические детали

- Использовать существующие импорты из `plugins/bird.rs`
- Гарантировать совместимость с текущей архитектурой ECS
- Сохранить текущую логику столкновений с трубами
- Обеспечить модульность кода

## Выполненные изменения

✅ **Реализовано в файле `plugins/bird.rs`:**

1. Добавлена система `check_bird_bounds` которая:
   - Получает размеры окна через `Query<&Window>`
   - Проверяет позицию птицы относительно границ экрана
   - Переходит в `GameState::GameOver` при выходе за границы
   - Работает только в состоянии `GameState::Playing`

2. Система интегрирована в BirdPlugin внутри метода `build`

3. Определены границы экрана:
   - Верхняя граница = window.height() / 2
   - Нижняя граница = -window.height() / 2

4. Алгоритм проверки:
   ```rust
   if bird_y > top_bound || bird_y < bottom_bound {
       next_state.set(GameState::GameOver);
   }
   ```

## Проверка

✅ Код компилируется без ошибок
✅ Игра успешно запускается
✅ Система добавлена в правильное место BirdPlugin
✅ Сохранена совместимость с существующей архитектурой